# Development
server {
  listen 80;
  server_name planningalerts.org.au.dev;

  root /srv/www/current/public;
  passenger_enabled on;
}

# Staging
server {
  listen 80;
  server_name test.planningalerts.org.au;

  root /srv/www/current/public;
  passenger_enabled on;

  auth_basic "Staging Site";
  auth_basic_user_file htpasswd;
}

# Production

## HTTP canonical redirect
server {
  listen 80;
  server_name planningalerts.org.au;
  rewrite ^/(.*) http://www.planningalerts.org.au/$1 permanent;
}

## HTTP
server {
  listen 80;
  server_name www.planningalerts.org.au;
  server_name api.planningalerts.org.au;
  server_name www.applicationtracking.planning.nsw.gov.au;

  root /srv/www/current/public;
  passenger_enabled on;
}

# TODO: HTTPS planningalerts.org.au canonical redirect
# TODO: HTTPS www.planningalerts.org.au
# TODO: HTTPS api.planningalerts.org.au
